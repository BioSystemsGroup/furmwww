<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
	<head>
		<title>LMV Poposal</title>
		<style>
			body {
				margin-right: 40px;
				margin-left: 40px;
				margin-top: 20px;
				line-height: 150%;
			}
			p, dl, note {
				width: 600px;
			}
			cite {
				color: #993333;
				display: none;
			}
			dt {
				font-weight: bold;
				margin-top: 12px;
			}
			li {
				font-weight: normal;
			}
			h1 {
				font-size: large;
			}
			h2 {
				font-size: larger;
				margin-top: 2em;
			}
			.todo {
				color: #FF0000;
			}
		</style>
	</head>
	<body>
		<h1>Liver Model Visualization (LMV)</h1>
		
		<cite>I. What is it - visualization of the liver models</cite>
		<p>The liver model visualization (LMV) attaches to the output of the <a href="isl.html">ISL</a> software implementation; visualizing data flow as virtual particles are perfused through virtual liver tissue. The LMV is a visualization of the data generated from an in silico simulation of a hepatic acinus within a lobule. As an abstraction of an abstraction--twice removed from the biological wet lab experiments being emulated, the LMV will render the computational data in a way that ties it back to its biological referent. </p>
		<p>The primary visualization will track with the data flow of the simulation along a time based index and visualize the network of sinusoidal canals that make up the hepatic acinus and the solution moving through those canals. Ancillary visualizations will track data from the simulation in various other ways, from simple data displays to performance graphs of functional components. Additionally, there will be charts that monitor each run segment of the simulation. </p>
		
		<cite>- what is visualization in general</cite>
		<p>The purpose of a visualization is to represent, in a visual fashion, that which is hidden in some other context. Visual representations can lead to new understanding of what is being represented. Visualizations also allow connections to be made between elements being represented that might not be obvious otherwise. It facilitates cognition at a non-verbal level where visual symbols enable alternative interpretations. </p>
		<cite>- what is visualization versus animation vs. a GUI, etc. ... i.e. what's the point</cite>
		<p>The primary purpose of the LMV is to represent the data output of the liver model simulation. While we are trying to relate the structural visualization to the idealized biological structure of a hepatic acinus, analysis of the data is the primary objective. Constraining the elements of the visualization to their biological derivatives adds meaning to the visualization and make comparisons to visualizations from other arenas easier and more useful. The visualization is not intended to be an animation of a solution profusing through liver tissue, any results to that effect are coincidental.  In contrast, the purpose of the LMV is to clearly and succinctly represent the dynamics of the algorithms in the ISL.  These dynamics must be clearly understood by the modeler in order for her to know and trust that the simulation is behaving as intended. The LMV is also not a Graphical User Interface.  It is not inteded to be a control interface to the simulation itself--only a passive observer. </p>
		
		<cite>- why do it?  what do we (bio-medical researchers) gain from it?</cite>
		<p>In addition to the benefits bestowed by visualizations mentioned above, and specifically regarding the liver model simulation, the LMV will provide a real time analysis of the data while the simulation is running. It will assist the modeler and the domain expert in so-called "face validation", where the observer has an intuitive understanding of how a hepatic acinus behaves and the visualization either reflects that intuition, or it doesn't.  In this same way, the LMV could also provide utility as a debugging devise or as a tool for spotting anomolies when parameter adjustments are being made.  Rather than validation, however, this type of analysis targets verification and helps ensure that the computational system is behaving as intended.</p>
		
		<cite>II. The various pieces - SSes and their internals, the graph, the outputs/observables</cite>
		<h2>LMV Anatomy</h2>
		<p>The LMV is made up of the structural visualization of the hepatic acinus and several ancillary visualizations and readouts of the component parts and larger context of the simulation.</p>
		<p>The structural visualization is a graph of the nodes and edges that define the structure of the hepatic acinus. Different visual treatments could be applied to this graph to serve different purposses. The current veiw in the prototype is a network structure of the nodes and edges that illustrates the sinusoidal connection matrix. A proposed view in development will focus on illustrating the graph as a series of interconnecting canals where collections of these canals represent sinusoidal segments. With a pluggable interface the structural visualization could take on many different visualizations to suit different purposes.</p>
		<p>In addition to multiple structural visualizations, we are proposing to develop exploded views of the graph structure. The current plan is to create a visualization of the individual Sinusoidal Segments (SSs). This view would likely utilize the pluggin archetechure mentioned above and be independant of the collective views. Even more granular views could also be developed using this approach.</p>
		<p>A third type of visualization that would potentially displace or augment the structural visiualization are the "day in the life" visualizations. These would be diagrams or animated cartoons that illustrate the various anatomical units of the simulation. These visualization may or may not be tied to the data throughput of the simulation.</p>
		<p>Lastly, ancillary visualizations would populate the perifery of the structural visualziation and provide additional (primarily statitistical) derived measures of the computational model. See <a href="#nextstep">The Next Step</a> section of this document for a full list of these visualziations.</p>
		
		<cite>III. the current demo, what's in it, and what it shows</cite>
		<h2>The Prototype</h2>
		<p>The prototype visualization was created using output files from the simulation -- the graph model representing the physical structure of the acinus ("lobule_*.gml") and the log file ("monitor.log"). The prototype renders the structural visualization as a network topology with the nodes/SSs represented as discs and the edges/sinusoidal connections represented as lines connecting the discs. There are two layout mechanisms in place for this topology: one that uses spatal data from the input stream (created by a third party graphing utility) and one that determines the topology using an internal algorithm. The prototype also included readouts for the portal vein and hepatic vein to track solutes passing through the system. As the LMV parses the simulation data, the discs representing sinusoids expand and darken as they fill with solutes and then reduce and lighten as solutes pass out of them.</p>
		<img src="img/lmv_prototype.png" width="580" height="456" border="0">
		
		<cite>IV. The proposal</cite><a name="nextstep"/>
		<h2>The Next Step</h2>
		<p style="margin-bottom: 0px;">The top priorities moving forward are connecting the LMV to the ISL simulation. The first step will be to formalize a data model that the LMV and ISL can use to comminicate. Once a channel of communication is opened between the simulation and the visualization, the LMV will have two operational modes, one as a slave to the ISL simulation and one as a standalone browser of saved ISL output. After connecting the LMV to the ISL, work can begin on additional visualiations, data readous and user controls. The top visualization priority is a new structural view that represents the SSes as a network of tubular connections with solute concentrations and types clearly represented. The following is a full list of development proposals for the LMV:</p>
		<dl>
			<dt style="margin-top: 0px;">Develop Data Model:</dt>
			<dd>A schema for data used by the visualization needs to be developed.</dd>
			<dt>Connecting the visualization to the simulation:</dt>
			<dd>Have visualization process real-time output from the visualization. </dd>
			<dt>Sinusoid Graph (Structural) Visualization:</dt>
			<ul>
				<li>Segment representation -- Draw segments as series of interconnecting tubes. An individual segment will be defined by their inbound edge and any outbound edges terminating at the hepatic vein.</li>
				<li>Segment distribution -- Let the distribution pattern of nodes in zone 0 determine node spacing for zones 1 and 2 creating a more realistic funnel shape tapering to the hepatic vein.</li>
				<li>Solute representation -- Devise a more meaningful representation of solute particles within the segment. Differentiate solute types and the space within which the solutes reside. For example: color coded bars radiating from the segment's axis along it's edges representing solute type and location where the color intensity of the bar is tied to solute density in that space.</li>
				<li>Network Topology View -- Improve performance of this view and apply distribution algorythm mentioned above.</li>
				<li>Investigate other structural visualization posibilities.</li>
			</ul>
			<dt>Sinusoid Visualization:</dt>
			<dd>An exploded view of an individual sinusoidal segment providing a more detailed view of the activity within a SS.</dd>
	   		<dt>"Day in the life" Visualizations:</dt>
			<dd>Animated cartoons or diagrams of individual components of the model (solute, hepatocyte, sinusoidal segment, lobule, etc.) providing even more detail about structure, process and component interactions.</dd>
			<dt>Additional Data Readouts:</dt>
			<ul>
				<li>Outflow profile -- Solute outflow profile and profiles of the component parts.</li>
				<li>Conservation of mass -- Visualization of solute mass in and solute mass out for each of the solute types.</li>
				<li>Mean solute location -- Raster grid visualization of average solute location in core, rim, endothelial space, space of Disse, as well as solutes bound in e-space/d-space.</li>
				<li>Mean transit time -- Numeric or bar readout of average solute time to pass through the model.</li>
			</ul>
		</dl>
		
		<cite>V. Rough timeline for each effort.  This could just be a sequence with rough time allocations. E.g.  1) segment rep [3 days], 2) SS viz [2 weeks], 3)  ....  etc.  Or, you could do a full blown Gantt with microsoft project or somesuch.</cite>
		<h2>Development Timeline</h2>
		<dl>
			<dt>Data Model</dt>
			<dd>Define data stream from ISL to LMV (2 days)</dd>
			<dd>Create Schema for XML data storage (2 days)</dd>
			
			<dt>Attach LMV to ISL</dt>
			<dd>Build C based data provider app to handel HTTP request from LMV (5 days)</dd>
			<dd>Create data output module in ISL (?)</dd>
			<dd>Connecting ISL to data provider interface (?)</dd>
			
			<dt>Sinusoid Graph (Structural) Visualization</dt>
			<dd>Address performance issues in current sturcture (1 days)</dd>
			<dd>Develop plug-in archetecture for structure view (3 days)</dd>
			<dd>Design plug-in for current network topology structure view (1 days)</dd>
			<dd>Design tubular connection structure view (3 days)</dd>
			<dd>Redesign zone-based distribution algorithm to new view (2 days)</dd>
			<dd>Design solute representations (2 days)</dd>
			
			<dt>Additional Data Readouts:</dt>
			<dd>Outflow profiles (3 days)</dd>
			<dd>Conservation of mass (1 days)</dd>
			<dd>Mean solute location (3 days)</dd>
			<dd>Mean transit time (1 days)</dd>
			
			<dt>Sinusoid Visualization:</dt>
			<dd>Adapted tubular connection structure view to create enlarged view of SS (5 days)</dd>
			<dd>Create a selection mechanism in structure view for navigating to SS view (1-2 days)</dd>
			
			<dt>"Day in the life" Visualizations:</dt>
			<dd>Create animation tracking the movement of a solute through the hepatic acinus (5 days)</dd>
		</dl>
	</body>
</html>
